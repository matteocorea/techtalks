<!DOCTYPE html>

<html>
<head>
<title>Video AFIS for auto deduping</title>
<meta charset='utf-8'>
<script src='http://html5slides.googlecode.com/svn/trunk/slides.js'></script>
</head>

<style>
.image {
	margin-top: 20px;
}
</style>

<body style='display: none'>
	<section class='slides layout-regular'>

		<article>
			<h1>Video AFIS for<br>automatic deduping</h1>
			<p>Matteo Corea<br>Jun 13, 2013</p>
		</article>

		<article>
			<h3>Objective</h3>
			<ul>
				<li>Fast not-really-real-time-but-almost identification of duplicates, to be used for example into VVC and Analytics</li>
				<li>Accurate enough (returning all the videos with the same title is not ideal)</li>
				<li>Easy to manage</li>
			</ul>
			<div class="build"><div>
				<h3>High level architecture: two different systems</h3>
				<ul>
					<li>Fingerprints extraction from videos</li>
					<li>Fingerprint distance to get duplicates</li>
				</ul>
			</div></div>
		</article>

		<article>
			<h3>Fingerprint extractor</h3>
			<div class="image"><img class="centered" src="vafis1.png"></div>
			Retrieve the video from its source, and extract a proper representation (fingerprint) that:
			<ul class="build">
				<li>it's not too big</li>
				<li>it's comparable with other VFPs in a meaningful way (MD5 is NOT a good idea)</li>
				<li>nice to have: fast algorithm</li>
			</ul>
		</article>
		<article>
			<h3>Duplicates</h3>
			<ul class="build">
				<li>The audio is often completely different</li>
				<li>Size and quality can differ</li>
				<li>Overall color and luminance correction are possible</li>
				<li>Length and absolute distance between frames don't change</li>
			</ul>
			<p class="build"><span>therefore:</span></p>
			<ul class="build">
				<li>the extraction is based on the images stream only</li>
				<li>the keyframes should be
					<ul>
						<li>converted to grayscale</li>
						<li>scaled to a fixed size</li>
						<li>normalized</li>
					</ul>
				</li>
			</ul>
		</article>
		
		<article>
			<h3>Keyframes based fingerprinting</h3>
			<ol>
				<li>Extract keyframes</li>
				<li>For each keyframe, get the fingerprint</li>
			</ol>
			<hr>
			<div class="build">
				<h3>Keyframe extraction</h3>
				<div class="build">
					<p>My method: get <i>n</i> frames linearly sampling the video</p>
					<p>My result: <strong>terrible!</strong> (that is terribly precise)<p>
				</div> 
				<div>
					<p>Other methods</p>
					<ul>
						<li>peaks in the first (or second) derivative of the luminance variation function</li>
						<li>progressive simplification via gaussian noise suppression, discrete contour evolution, relevance order measure</li>
					</ul>
				</div>
			</div>
		</article>
		
		<article>
			<h3>Keyframe fingerprint extraction</h3>
			<ul class="build">
				<li>Average luminance on the frame: for <i>k</i> keyframes, we store the average value of all the pixels</li>
				<li>Average luminance on the blocks: same as above, but each frame is divided into <i>n</i> x <i>m</i> blocks in advance (good for subtitles)
				<li>Orientation field: same as above, but instead of the luminance, for each block, the orientation field on the block is stored (angle, magnitude)</li>
				<li>other <b>incredible</b> methods that I simply don't know (nonrigid image matching?)</li>
			</ul>
		</article>
		
		<article>
			<h3>Fingerprint distance calculator</h3>
			<div class="image"><img class="centered" src="vafis2.png"></div>
			<p>The "easy" part</p>
			<ol>
				<li>Compare the whole FPDB with a given video FP</li>
				<li>Compute a sensible threshold</li>
				<li>Return all the probable-duplicates</li>
			</ol>
		</article>
		
		<article>
			<h3>Fingerprint distance calculator</h3>
			<div class="build">
				<div>
					<h4>Optimise search (cut the search space)</h4>
					<ul>
						<li>Compare only with videos having a comparable length</li>
						<li>Use title (?) or other known metadata</li>
					</ul>
				</div>
				<div>
					<h4>FP Distance (depends on the actual FP extraction)</h4>
					<ul>
						<li>could be as easy as a difference</li>
						<li>edit distance, hamming distance</li>
					</ul>
				</div>
				<div>
					<h4>Distance Threshold</h4>
					<ul>
						<li>Static</li>
						<li>No idea</li>
					</ul>
				</div>
			</div>
		</article>
		
		<article>
			<h1 class="centered">To be continued...</h1>
		</article>

	</section>

</body>
</html>
